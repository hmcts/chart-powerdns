# Default values for pdns.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

pdns:
  api:
      enabled: yes
      key: PowerDNSAPI
  webserver:
      allowFrom: 0.0.0.0/0
  dnsupdate:
      enabled: no

replicaCount: 1

image:
  repository: rpedev.azurecr.io/psitrax/powerdns
  tag: 4.1.5r2
  pullPolicy: IfNotPresent

tcpService:
  type: LoadBalancer
  loadBalancerIP: 10.160.180.2
  annotations:
    service.beta.kubernetes.io/azure-load-balancer-internal: "true"
    # hopefully will work in next version of 1.12.x https://github.com/kubernetes/kubernetes/pull/74494
    service.beta.kubernetes.io/azure-load-balancer-mixed-protocols: "true"

udpService:
  type: LoadBalancer
  loadBalancerIP: 10.160.180.3
  annotations:
    service.beta.kubernetes.io/azure-load-balancer-internal: "true"

apiService:
  annotations: {}

ingress:
  enabled: true
  annotations:
    kubernetes.io/ingress.class: traefik
    # kubernetes.io/tls-acme: "true"
  path: /
  hosts:
    - dns.platform.hmcts.net
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

resources:
  limits:
   cpu: 100m
   memory: 1024Mi
  requests:
   cpu: 100m
   memory: 128Mi

nodeSelector: {}

tolerations: []

affinity: {}

environment:
  AUTOCONF: postgres
  PGSQL_USER: pdns
  PGSQL_PASS: pdns
  PGSQL_HOST: powerdns-postgresql
  PDNS_DEFAULT_SOA_NAME: root.platform.hmcts.net

postgresql:
  postgresqlUsername: pdns
  postgresqlPassword: pdns
  postgresqlDatabase: pdns
  persistence:
    enabled: false
